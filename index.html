<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä¹é€å·ç æ¨èå™¨</title>
  <meta name="description" content="ç‚¹å‡»æŒ‰é’®å³å¯ä»1~45ä¸­éšæœºæ¨è6ä¸ªä¸é‡å¤å·ç ï¼ˆå•é¡µHTMLç‰ˆï¼‰ã€‚" />

  <style>
    :root{
      --bg:#0b1220;
      --card:#111a2d;
      --text:#e9eefc;
      --muted:#b7c3e6;
      --line:rgba(255,255,255,.12);
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --accent:#6ea8ff;
      --accent2:#70ffc4;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans SC", "Microsoft YaHei", Arial, sans-serif;
      background: radial-gradient(1200px 600px at 10% 0%, rgba(110,168,255,.22), transparent 60%),
                  radial-gradient(900px 500px at 90% 10%, rgba(112,255,196,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.6;
    }
    .container{max-width:1100px; margin:0 auto; padding:24px}

    /* 2ì—´ ë ˆì´ì•„ì›ƒ: ì™¼ìª½(ì¶”ì²¨ê¸°) / ì˜¤ë¥¸ìª½(ìµœê·¼ì¶”ì²œ) */
    .top-grid{
      display:grid;
      grid-template-columns: 1.55fr .95fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width: 900px){
      .top-grid{grid-template-columns:1fr}
    }

    .card{
      background: rgba(17,26,45,.78);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin: 0 0 12px;
    }
    h1{
      margin:0;
      font-size: clamp(22px, 3vw, 34px);
      line-height:1.15;
    }
    .subtitle{margin:6px 0 0; color:var(--muted); font-size:14px}

    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-top: 12px;
    }
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:12px 14px;
      border-radius: 14px;
      border:1px solid rgba(110,168,255,.35);
      background: rgba(110,168,255,.12);
      color: var(--text);
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease;
      font-weight:600;
    }
    .btn:hover{transform: translateY(-1px)}
    .btn.secondary{
      border-color: rgba(112,255,196,.35);
      background: rgba(112,255,196,.10);
    }
    .btn.ghost{
      border-color: var(--line);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-weight:600;
    }
    label{
      display:inline-flex;
      gap:8px;
      align-items:center;
      color: var(--muted);
      font-size: 14px;
      padding: 10px 12px;
      border:1px solid var(--line);
      border-radius: 14px;
      background: rgba(255,255,255,.04);
      user-select:none;
    }
    input[type="checkbox"]{transform: translateY(1px)}

    .numbers{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 14px;
      padding-top: 12px;
      border-top: 1px solid var(--line);
      min-height: 64px;
    }
    .ball{
      width:54px; height:54px;
      border-radius: 999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:800;
      font-size: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
    }
    .meta{
      margin-top: 10px;
      color: var(--muted);
      font-size: 13.5px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .pill{
      padding:8px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-size: 13px;
    }

    .list{
      margin:0;
      padding-left: 18px;
      color: var(--muted);
      font-size: 14px;
    }

    /* æœ€è¿‘æ¨è */
    .history{
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .history-item{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      border-radius: 14px;
      padding: 10px 12px;
      color: var(--muted);
      font-size: 14px;
    }
    .history-item code{
      color: var(--text);
      font-weight:700;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13.5px;
    }
    .small{color: var(--muted); font-size: 12.5px}

    .toast{
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(17,26,45,.92);
      border: 1px solid var(--line);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      display:none;
      z-index: 999;
      font-size: 13.5px;
    }

    /* âœ… DHLottery ì•ˆë‚´ ë°•ìŠ¤ (ì¤‘êµ­ì–´ë¡œ í†µì¼) */
    .korea-lotto-box{
      margin-top: 14px;
      padding: 14px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
    }
    .korea-lotto-title{
      font-weight: 800;
      letter-spacing: .2px;
      margin-bottom: 6px;
    }
    .korea-lotto-desc{
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 10px;
    }
    .korea-lotto-link{
      display: inline-block;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.03);
      color: var(--text);
      font-weight: 700;
      word-break: break-all;
      text-decoration: none;
    }
    .korea-lotto-link:hover{
      border-color: rgba(110,168,255,.35);
      background: rgba(110,168,255,.10);
    }
    .korea-lotto-actions{
      margin-top: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="top-grid">
      <!-- å·¦ï¼šæ¨èå™¨ -->
      <div class="card">
        <header>
          <div>
            <h1>ä¹é€å·ç æ¨èå™¨</h1>
            <p class="subtitle">ç‚¹å‡»æŒ‰é’®å³å¯ä» 1~45 ä¸­éšæœºæ¨è 6 ä¸ªä¸é‡å¤å·ç ã€‚</p>
          </div>
          <div class="pill" id="updatedAt">-</div>
        </header>

        <div class="row">
          <div class="controls">
            <button class="btn" id="btnPick" type="button">ğŸ² æ¨èå·ç </button>
            <button class="btn secondary" id="btnCopy" type="button">ğŸ“‹ å¤åˆ¶</button>
            <button class="btn ghost" id="btnReset" type="button">ğŸ§¹ æ¸…ç©º</button>

            <label title="å°†æ¨èå·ç æŒ‰å‡åºæ’åˆ—">
              <input type="checkbox" id="sortAsc" checked />
              å‡åºæ’åˆ—
            </label>

            <label title="ä¿å­˜æœ€è¿‘æ¨èè®°å½•ï¼ˆæœ€å¤š5æ¡ï¼‰">
              <input type="checkbox" id="saveHistory" checked />
              ä¿å­˜è®°å½•
            </label>
          </div>

          <div class="small" id="hint">
            å°æç¤ºï¼šå¯ä»¥è¿ç»­ç‚¹å‡»â€œæ¨èå·ç â€ï¼Œæ¯æ¬¡éƒ½ä¼šé‡æ–°éšæœºç”Ÿæˆã€‚
          </div>
        </div>

        <div class="numbers" id="numbers" aria-label="æ¨èå·ç æ˜¾ç¤ºåŒºåŸŸ"></div>

        <!-- âœ… ë¹¨ê°„ ë™ê·¸ë¼ë¯¸ ì˜ì—­(ëª¨ë‘ ì¤‘êµ­ì–´) -->
        <div class="korea-lotto-box" aria-label="éŸ©å›½å½©ç¥¨å®˜ç½‘ ì•ˆë‚´">
          <div class="korea-lotto-title">éŸ©å›½å½©ç¥¨å®˜ç½‘ï¼ˆDHLotteryï¼‰</div>
          <div class="korea-lotto-desc">å¯åœ¨çº¿è´­ä¹°éŸ©å›½çš„å½©ç¥¨ã€‚</div>

          <a class="korea-lotto-link" href="https://www.dhlottery.co.kr/" target="_blank" rel="noopener noreferrer">
            https://www.dhlottery.co.kr/
          </a>

          <div class="korea-lotto-actions">
            <button class="btn ghost" type="button" id="copyDHL">å¤åˆ¶é“¾æ¥</button>
            <a class="btn secondary" href="https://www.dhlottery.co.kr/" target="_blank" rel="noopener noreferrer">ç«‹å³æ‰“å¼€</a>
          </div>
        </div>

        <div class="meta">
          <div class="pill" id="status">ç­‰å¾…ä¸­</div>
          <div class="small">â€» å·ç ä¸ºéšæœºæ¨èï¼Œä¸ä¿è¯ä¸­å¥–ã€‚</div>
        </div>
      </div>

      <!-- å³ï¼šæœ€è¿‘æ¨èï¼ˆæ˜¾ç¤º 5 æ¡ï¼‰ -->
      <div class="card">
        <h2 style="margin:0 0 8px; font-size:18px;">æœ€è¿‘æ¨èï¼ˆæ˜¾ç¤º 5 æ¡ï¼‰</h2>
        <div class="small">è®°å½•ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼ˆåˆ·æ–°ä¹Ÿä¸ä¼šä¸¢ï¼‰ã€‚</div>
        <div class="history" id="history"></div>

        <div style="margin-top:12px; border-top:1px solid var(--line); padding-top:12px;">
          <h3 style="margin:0 0 8px; font-size:16px;">ä½¿ç”¨æ–¹æ³•</h3>
          <ul class="list">
            <li>ç‚¹å‡» <b style="color:var(--text)">æ¨èå·ç </b> ç”Ÿæˆ 6 ä¸ªå·ç </li>
            <li>ç‚¹å‡» <b style="color:var(--text)">å¤åˆ¶</b> å¤åˆ¶ä¸º â€œ1, 2, 3, 4, 5, 6â€ æ ¼å¼</li>
            <li>å…³é—­ <b style="color:var(--text)">å‡åºæ’åˆ—</b> å¯æŒ‰ç”Ÿæˆé¡ºåºæ˜¾ç¤º</li>
            <li>å…³é—­ <b style="color:var(--text)">ä¿å­˜è®°å½•</b> åˆ™ä¸å†™å…¥æœ€è¿‘æ¨è</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // ===== å·¥å…· =====
    const $ = (id) => document.getElementById(id);

    function pad2(n){ return String(n).padStart(2, "0"); }
    function formatTime(d){
      return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
    }

    function toast(msg){
      const el = $("toast");
      el.textContent = msg;
      el.style.display = "block";
      clearTimeout(toast._t);
      toast._t = setTimeout(() => el.style.display = "none", 1400);
    }

    // ===== ç”Ÿæˆï¼š1~45 ä¸é‡å¤ 6 ä¸ª =====
    function pickLotto(){
      const set = new Set();
      while(set.size < 6){
        const n = Math.floor(Math.random() * 45) + 1;
        set.add(n);
      }
      return Array.from(set);
    }

    // ===== æ¸²æŸ“å·ç  =====
    function ballGroup(n){
      if(n <= 10) return 1;
      if(n <= 20) return 2;
      if(n <= 30) return 3;
      if(n <= 40) return 4;
      return 5;
    }

    function renderNumbers(nums){
      const wrap = $("numbers");
      wrap.innerHTML = "";
      nums.forEach(n => {
        const div = document.createElement("div");
        div.className = "ball";
        const g = ballGroup(n);
        div.style.background = `rgba(255,255,255,${0.05 + g*0.015})`;
        div.textContent = n;
        wrap.appendChild(div);
      });
    }

    // ===== æœ€è¿‘æ¨èï¼šæœ€å¤š 5 æ¡ =====
    const STORAGE_KEY = "lotto_history_v3_cn";
    const MAX_HISTORY = 5;

    function loadHistory(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : [];
      }catch(e){
        return [];
      }
    }
    function saveHistory(items){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(items.slice(0, MAX_HISTORY)));
    }

    function renderHistory(){
      const items = loadHistory();
      const box = $("history");
      box.innerHTML = "";

      if(items.length === 0){
        const empty = document.createElement("div");
        empty.className = "small";
        empty.style.marginTop = "10px";
        empty.textContent = "æš‚æ— è®°å½•ï¼Œå…ˆç‚¹å‡»â€œæ¨èå·ç â€è¯•è¯•å§ï¼";
        box.appendChild(empty);
        return;
      }

      items.slice(0, MAX_HISTORY).forEach(item => {
        const row = document.createElement("div");
        row.className = "history-item";

        const left = document.createElement("div");
        left.innerHTML = `<div class="small">${item.time}</div><code>${item.text}</code>`;

        const right = document.createElement("button");
        right.className = "btn ghost";
        right.type = "button";
        right.style.padding = "8px 10px";
        right.textContent = "å¤åˆ¶";
        right.addEventListener("click", async () => {
          await copyText(item.text);
        });

        row.appendChild(left);
        row.appendChild(right);
        box.appendChild(row);
      });
    }

    // ===== å¤åˆ¶ =====
    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("å·²å¤åˆ¶ï¼");
      }catch(e){
        prompt("æ— æ³•è‡ªåŠ¨å¤åˆ¶ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š", text);
      }
    }

    // âœ… å¤åˆ¶ DHLottery é“¾æ¥ï¼ˆtoastë„ ì¤‘êµ­ì–´ï¼‰
    const copyDHLBtn = document.getElementById("copyDHL");
    if(copyDHLBtn){
      copyDHLBtn.addEventListener("click", async () => {
        const url = "https://www.dhlottery.co.kr/";
        try{
          await navigator.clipboard.writeText(url);
          toast("é“¾æ¥å·²å¤åˆ¶ï¼");
        }catch(e){
          prompt("æ— æ³•è‡ªåŠ¨å¤åˆ¶ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š", url);
        }
      });
    }

    // ===== çŠ¶æ€ & æ¸…ç©º =====
    function setStatus(msg){
      $("status").textContent = msg;
    }

    function resetAll(){
      $("numbers").innerHTML = "";
      localStorage.removeItem(STORAGE_KEY);
      renderHistory();
      setStatus("å·²æ¸…ç©º");
      toast("å·²æ¸…ç©º");
    }

    // ===== äº‹ä»¶ =====
    let lastNums = [];

    $("btnPick").addEventListener("click", () => {
      const nums = pickLotto();
      const finalNums = $("sortAsc").checked ? [...nums].sort((a,b)=>a-b) : nums;

      renderNumbers(finalNums);
      lastNums = finalNums;

      const now = new Date();
      const text = finalNums.join(", ");
      setStatus(`æ¨èå®Œæˆï¼š${text}`);

      if($("saveHistory").checked){
        const items = loadHistory();
        items.unshift({ time: formatTime(now), text });
        saveHistory(items);
        renderHistory();
      }
    });

    $("btnCopy").addEventListener("click", async () => {
      if(!lastNums.length){
        toast("è¯·å…ˆç‚¹å‡»â€œæ¨èå·ç â€ï¼");
        return;
      }
      await copyText(lastNums.join(", "));
    });

    $("btnReset").addEventListener("click", () => {
      if(confirm("ç¡®å®šè¦æ¸…ç©ºæ¨èå·ç å’Œæœ€è¿‘è®°å½•å—ï¼Ÿ")){
        resetAll();
      }
    });

    // ===== åˆå§‹æ˜¾ç¤º =====
    const now = new Date();
    $("updatedAt").textContent = `è®¿é—®æ—¶é—´ï¼š${formatTime(now)}`;
    renderHistory();
  </script>
</body>
</html>
